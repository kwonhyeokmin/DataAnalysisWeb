//button event
$(function(){
    $('.btn-img').on('click', function(){
        $(this).parent().parent().find('.alert').toggle();
    });
    $('.selectpicker').change(function () {
        selected_lo = $('#select_lo').val()+"";
        selected_sam = $('#select_sam').val()+"";
        onLoadLineChart();
    });
    onLoadLineChart();
});
//draw line chart
function onLoadLineChart() {
    var endpoint = '/api/index/data';
    var selected_lo = $('#select_lo').val() + "";
    var selected_sam = $('#select_sam').val() + "";

    $.ajax({
        method: "GET",
        url: endpoint,
        data: {'sampleNo':selected_sam, 'location':selected_lo},
        success: function (response) {
            var ctx = document.getElementById("lineChart");
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: response.labels,
                    datasets: [{
                        label: '# 잎길이',
                        data: response.leaf_len,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255,99,132,1)',
                        borderWidth: 1
                    },
                        {
                            label: '# 잎수',
                            data: response.leaf_n,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }
                        ,{
                            label: '# 잎너비',
                            data: response.leaf_width,
                            backgroundColor: 'rgba(255, 206, 86, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '# PED',
                            data: response.ped,
                            backgroundColor: 'rgba(255, 206, 86, 0.2)',
                            borderColor: 'rgba(255, 206, 86, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '# 경경',
                            data: response.plant_len,
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '# 초장',
                            data: response.stem_width,
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        }],
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                }
                            }]
                        }
                    }
                }
            });
        },
        error: function (error_data) {
            console.log("error")
            console.log(error_data)
        }
    })
}