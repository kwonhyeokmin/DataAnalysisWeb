{% extends 'base.html' %}
{% load staticfiles %}
{% block scripts %}
<script type="text/javascript">
	window.onload = function () {
		var endpoint = '/api/index/data'
		$.ajax({
			method: "GET",
			url: endpoint,
			success: function (response) {
				console.log(response);
				var ctx = document.getElementById("myChart");
				var myChart = new Chart(ctx, {
					type: 'line',
					data: {
						labels: response.labels,
						datasets: [{
							label: '# 잎길이',
							data: response.leaf_len,
							backgroundColor: [
								'rgba(255, 99, 132, 0.2)',
							],
							borderColor: [
								'rgba(255,99,132,1)',
							],
							borderWidth: 1
						},
							{
							    label: '# 잎수',
								data: response.leaf_n,
								backgroundColor: [
									'rgba(54, 162, 235, 0.2)',
								],
								borderColor: [
									'rgba(54, 162, 235, 1)',
								],
								borderWidth: 1
							}
							,{
						    	label: '# 잎너비',
								data: response.leaf_width,
								backgroundColor: [
								    'rgba(255, 206, 86, 0.2)',
								],
								borderColor: [
								    'rgba(54, 162, 235, 1)',
								],
								borderWidth: 1
							},
							{
							    label: '# PED',
								data: response.ped,
								backgroundColor: [
									'rgba(255, 206, 86, 0.2)',
								],
								borderColor: [
									'rgba(255, 206, 86, 1)',
								],
								borderWidth: 1
							},
							{
							    label: '# 경경',
								data: response.plant_len,
								backgroundColor: [
								    'rgba(75, 192, 192, 0.2)',
								],
								borderColor: [
									'rgba(75, 192, 192, 1)',
								],
								borderWidth: 1
							},
							{
							    label: '# 초장',
								data: response.stem_width,
								backgroundColor: [
									'rgba(153, 102, 255, 0.2)',
								],
								borderColor: [
								    'rgba(153, 102, 255, 1)',
								],
								borderWidth: 1
							}],
						options: {
							scales: {
								yAxes: [{
									ticks: {
										min: 0,
										max: 100,
										beginAtZero: true,
									}
								}]
							}
						}
					}
				});
			},
			error: function (error_data) {
				console.log("error")
				console.log(error_data)
			}
		})
    }

</script>
{% endblock %}
{% block content %}
<div class="col-md-6">
	<h3>
		Line Chart
		<img class="btn-img" src='{% static "image/info.svg" %}' height="20px" sizes="20px">
	</h3>
	<div class="alert alert-dismissable alert-info" style="display:none;">
		<button type="button" class="close" data-dismiss="alert" aria-hidden="true">
			×
		</button>
		<h4>
			Alert!
		</h4> <strong>Warning!</strong> Best check yo self, you're not looking too good. <a href="#" class="alert-link">alert link</a>
	</div>
	<div>
		<canvas id="myChart" width="400" height="200"></canvas>
	</div>
</div>
{% endblock %}
